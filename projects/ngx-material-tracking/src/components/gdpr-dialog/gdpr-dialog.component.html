<!-- eslint-disable angular/cyclomatic-complexity -->
<div class="dialog-title" mat-dialog-title>
    <h1>{{gdprDialogData.title}}</h1>
    <a *ngIf="gdprDialogData.displayCloseAllowsAll" class="close-button" (click)="allowAll()">{{gdprDialogData.allowAllButtonLabel}} ðŸ—™</a>
</div>
<div class="dialog-content" mat-dialog-content>
    <div [innerHTML]="gdprDialogData.text">
    </div>

    <b *ngIf="technicalNecessaryTrackings.length">{{gdprDialogData.technicalNecessaryTitle}}</b>
    <mat-accordion *ngIf="technicalNecessaryTrackings.length" displayMode="flat">
        <mat-expansion-panel *ngFor="let tracking of technicalNecessaryTrackings">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    {{tracking.name}}
                    <mat-slide-toggle checked disabled></mat-slide-toggle>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <div *ngFor="let paragraph of tracking.description">
                {{paragraph}}
            </div>
        </mat-expansion-panel>
    </mat-accordion>

    <b *ngIf="enabledByDefaultTrackings.length">{{gdprDialogData.enabledByDefaultTitle}}</b>
    <mat-accordion *ngIf="enabledByDefaultTrackings.length" displayMode="flat">
        <mat-expansion-panel *ngFor="let tracking of enabledByDefaultTrackings">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    {{tracking.name}}
                    <!-- eslint-disable-next-line angular/no-call-expression -->
                    <mat-slide-toggle [checked]="isTrackingEnabled(tracking)" (click)="$event.stopPropagation()" (change)="toggleTracking(tracking)"></mat-slide-toggle>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <div *ngFor="let paragraph of tracking.description">
                {{paragraph}}
            </div>
        </mat-expansion-panel>
    </mat-accordion>

    <b *ngIf="disabledByDefaultTrackings.length">{{gdprDialogData.disabledByDefaultTitle}}</b>
    <mat-accordion *ngIf="disabledByDefaultTrackings.length" displayMode="flat">
        <mat-expansion-panel *ngFor="let tracking of disabledByDefaultTrackings">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    {{tracking.name}}
                    <!-- eslint-disable-next-line angular/no-call-expression -->
                    <mat-slide-toggle [checked]="isTrackingEnabled(tracking)" (click)="$event.stopPropagation()" (change)="toggleTracking(tracking)"></mat-slide-toggle>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <div *ngFor="let paragraph of tracking.description">
                {{paragraph}}
            </div>
        </mat-expansion-panel>
    </mat-accordion>
</div>
<div class="dialog-actions" mat-dialog-actions>
    <button type="button" class="allow-all-button" mat-raised-button (click)="allowAll()">{{gdprDialogData.allowAllButtonLabel}}</button>
    <button type="button" class="save-settings-button" mat-raised-button (click)="saveSettings()">{{gdprDialogData.saveSettingsButtonLabel}}</button>
    <button type="button" class="disallow-all-button" mat-button (click)="disallowAll()">{{gdprDialogData.disallowAllButtonLabel}}</button>
    <div class="links">
        <a target="_blank" rel="noopener noreferrer" [href]="gdprDialogData.privacyRoute">{{gdprDialogData.privacyDisplayName}}</a>
        <a target="_blank" rel="noopener noreferrer" [href]="gdprDialogData.imprintRoute">{{gdprDialogData.imprintDisplayName}}</a>
    </div>
</div>